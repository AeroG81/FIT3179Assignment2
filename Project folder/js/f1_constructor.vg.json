{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "background": "#413e3e",
  "data": { "url": "../../Dataset/constructors.csv" },
  "config": {
    "title": {
      "color": "#ffffff"
    },
    "legend": {
      "titleColor": "#ffffff",
      "labelColor": "#ffffff",
      "labelFont": "Source Sans Pro"
    },
    "axis": {
      "titleColor": "#ffffff",
      "labelColor": "#ffffff"
    },
    "style": {
      "cell": {
        "stroke": "transparent"
      }
    }
  },
  "vconcat": [
    {
      "width": 620,
      "height": 200,
      "encoding": {
        "x": { "field": "nationality", "sort": "-y", "title": "Nationality" },
        "y": { "aggregate": "count", "title": "Number of Constructors" },
        "tooltip": [
          {
            "aggregate": "count",
            "type": "quantitative",
            "title": "Number of Constructors"
          },
          { "field": "nationality", "type": "nominal", "title": "Nationality" }
        ]
      },
      "layer": [
        {
          "mark": "bar",
          "params": [
            {
              "name": "nation",
              "select": {
                "type": "point",
                "fields": ["nationality"],
                "on": "click"
              }
            }
          ]
        },
        {
          "mark": {
            "type": "text",
            "align": "center",
            "baseline": "middle",
            "dy": -10,
            "color": "#ffffff"
          },
          "encoding": {
            "text": { "aggregate": "count", "type": "quantitative" }
          }
        }
      ]
    },
    {
      "width":  620,
      "height": 250,
      "transform": [
        { "calculate": "ceil (datum.constructorId/10)", "as": "col" },
        { "calculate": "datum.constructorId - datum.col*10", "as": "row" }
      ],
      "mark": { "type": "point", "filled": true },
      "encoding": {
        "x": { "field": "col", "type": "ordinal", "axis": null },
        "y": { "field": "row", "type": "ordinal", "axis": null },
        "tooltip": [
          { "field": "nationality", "type": "nominal", "title": "Nationality" },
          { "field": "name", "type": "nominal", "title": "Constructor name" },
          { "field": "constructorId", "type": "nominal", "title": "Constructor ID" }
        ],
        "shape": {
          "value": "M1.7 -1.7h-0.8c0.3 -0.2 0.6 -0.5 0.6 -0.9c0 -0.6 -0.4 -1 -1 -1c-0.6 0 -1 0.4 -1 1c0 0.4 0.2 0.7 0.6 0.9h-0.8c-0.4 0 -0.7 0.3 -0.7 0.6v1.9c0 0.3 0.3 0.6 0.6 0.6h0.2c0 0 0 0.1 0 0.1v1.9c0 0.3 0.2 0.6 0.3 0.6h1.3c0.2 0 0.3 -0.3 0.3 -0.6v-1.8c0 0 0 -0.1 0 -0.1h0.2c0.3 0 0.6 -0.3 0.6 -0.6v-2c0.2 -0.3 -0.1 -0.6 -0.4 -0.6z"
        },
        "color": {
          "condition": { "param": "nation", "value": "rgb(194,81,64)" },
          "value": "rgb(167,165,156)"
        },
        "size": { "value": 40 }
      }
    }
  ]
}
